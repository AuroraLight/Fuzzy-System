# Fuzzy-System
Practice fuzzy algorithm

* ## GA
### 一、程式介面說明
>程式執行後，會顯示一個GUI介面，左半部canvas繪出預設的車子軌道，右半部依序為迭代次數、族群大小、交配機率、突變機率以及隱藏層神經元個數的設定，這些選項都會有一個預先設定值。開啟檔案按鈕提供使用者自行選取用來訓練RBFN的資料(ex: train4dAll.txt)，在開啟檔案後，run按鈕才能被點選，按下run後，程式執行RBFN訓練並讓車子根據RBFN的結果行走，最後左半部canvas繪出到達終點的結果。
 
### 二、程式碼說明
>使用python 3.6版開發，GUI使用python內建的Tkinter，程式分為五個檔案，main.py是程式進入點，RBFN.py為運用RBFN會用到的所有函式，包含訓練RBFN函式、test函式、正規化資料、適應函數計算函式，GA.py為執行基因演算法流程，包含複製、交配、突變、更新基因，Car.py為車子要跑到終點所需的所有處理函式，包含得到需要的線性方程式、線性方程式彼此的交點、取得正前方與左右各45度之距離，GUI.py定義使用者介面，並顯示結果。

### 三、GA演算法設計
使用實數型演算法
* 複製方式: 
使用輪盤式選擇，由於我們適應值是越小越好，因此先將適應函數值(E(n)值)取倒數相加得到總和，再將適應值倒數乘上總和的倒數得到該基因的輪盤佔有面積。
從適應值最小的那個基因個體開始將基因複製到交配池，複製的個數為該基因的輪盤佔有面積乘上族群大小。
* 交配方式: 
交配的數量為族群大小乘上交配機率，在交配池中隨機選取兩個基因個體執行交配，交配方式採用字罩交配，先隨機起始點索引值以及終點索引值，將起點到終點的內的基因交換。
* 突變方式: 
突變的數量為族群大小乘上突變機率(至少會突變一個基因個體)，在交配池中隨機選取基因個體來突變，固定突變W1以及最後一個sigma值。
* 訓練時間:
根據訓練的參數以及訓練資料量有所差異，下方實驗結果討論。
  
### 四、實驗結果(包含移動軌跡截圖)與分析
使用訓練資料集train4dSP.txt運行兩種參數，
* 第一種為迭代次數7、族群大小5、交配機率0.8、突變機率0.1、隱藏層神經元個數4
* 第二種為迭代次數100、族群大小300、交配機率0.8、突變機率0.1、隱藏層神經元個數4
由於正確率(一組能讓模擬車運行到終點的基因個體的出現率)不高，因此將程式設計為模擬車能夠成功運行至終點才繪出到GUI的canvas上，console印出錯誤次數、最小適應值、基因個體、成功的運行軌跡。
	訓練時間
第一種參數	平均0.2s
第二種參數	平均170s

* ## PSO
### 一、程式介面說明
> 程式執行後，會顯示一個GUI介面，左半部canvas繪出預設的車子軌道，右半部依序為迭代次數、族群大小、自身經驗權重、群體經驗權重以及隱藏層神經元個數的設定，這些選項都會有一個預先設定值。開啟檔案按鈕提供使用者自行選取用來訓練RBFN的資料(ex: train4dAll.txt)，在開啟檔案後，run按鈕才能被點選，按下run後，程式執行RBFN訓練並讓車子根據RBFN的結果行走，最後左半部canvas繪出結果。
### 二、程式碼說明
>使用python 3.6版開發，GUI使用python內建的Tkinter，程式分有六個檔案，main.py是程式進入點，RBFN.py為運用RBFN會用到的所有函式，包含訓練RBFN函式、正規化資料、反正規化資料，PSO.py為PSO演算法會用到的函式庫，Car.py為車子要跑到終點所需的所有處理函式(從作業一)，包含得到需要的線性方程式、線性方程式彼此的交點、取得正前方與左右各45度之距離，GUI.py定義使用者介面，並顯示結果。
 
### 三、PSO演算法設計
>一開始隨機每個個體的速度，並儲存群體中最佳的(E最小)個體向量g，同時儲存每個個體自身最佳(E跟自己過往比得最小值)向量p，使用公式Vi(t+1) = Vi(t) + C1*(pi-Xi(t)) + C2*(g-Xi(t))以及Xi(t+1)=Xi(t)+Vi(t+1)，其中i代表個體、C1代表自身經驗權重、C2代表群體經驗權重、Xi(t)代表個體i當前向量。
### 四、實驗結果(包含移動軌跡截圖)與分析
>訓練資料集採用train4dSP.txt，參數設定分別為迭代次數3、族群大小5、自身經驗權重0.6、群體經驗權重0.4、隱藏層神經元個數8下，平均訓練時間為0.2s。 
嘗試許多不同參數的組合，大部分無法在1000次run中得到一組能夠讓模擬車運行到終點的結果權重，當迭代次數與群組大小很大時，訓練時間相當緩慢。
